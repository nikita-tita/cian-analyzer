# üöÄ –û—Ç—á–µ—Ç –æ –¥–µ–ø–ª–æ–µ Housler v2.0

**–î–∞—Ç–∞**: 8 –Ω–æ—è–±—Ä—è 2025
**–°–µ—Ä–≤–µ—Ä**: 91.229.8.221 (housler.ru)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–£–°–ü–ï–®–ù–û**

---

## ‚úÖ –ß—Ç–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ

### 1. Mobile-First UI —Å Horizontal Swipe
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –ª–∏—Å—Ç–∞—é—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è 85% —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ Scroll snap –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞: Services, Process, Pricing

### 2. Manual Input Mode
- ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø–∞—Ä—Å–∏–Ω–≥—É URL
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- ‚úÖ Backend endpoint `/api/create-manual`
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ –Ω–∞ –¶–∏–∞–Ω

### 3. Next Button
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π user flow

### 4. Favicon + PWA
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –±—É–∫–≤–∞ H
- ‚úÖ –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã (SVG, PNG, ICO)

### 5. SSL + Production
- ‚úÖ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç (housler.ru)
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ Nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### 6. –£–ª—É—á—à–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ CIAN
- ‚úÖ Stealth mode –¥–ª—è –æ–±—Ö–æ–¥–∞ captcha
- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ HTTP headers
- ‚úÖ –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout (60s)
- ‚úÖ NetworkIdle wait strategy

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

```
Uptime: 2 minutes (–ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
Load Average: 0.64, 0.19, 0.07 ‚úÖ (–±—ã–ª–æ 61.05 - –∫—Ä–∏—Ç–∏—á–Ω–æ)
Memory: 277.4M
Workers: 2 Gunicorn workers
Status: active (running)
```

---

## üåê –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

### HTTPS
```bash
curl -I https://housler.ru
# HTTP/1.1 200 OK ‚úÖ
```

### Health Endpoint
```bash
curl https://housler.ru/health
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "status": "healthy",
  "version": "2.0.0",
  "components": {
    "parser": {
      "status": "healthy",
      "type": "PlaywrightParser"
    },
    "session_storage": {
      "status": "healthy"
    },
    "redis_cache": {
      "status": "degraded",
      "available": false
    }
  }
}
```

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- Load average: 61.05, 58.22, 38.94
- SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ–±—Ä—ã–≤–∞–ª–∏—Å—å
- –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Playwright –±—Ä–∞—É–∑–µ—Ä–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ CIAN
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ VPS

**–†–µ—à–µ–Ω–∏–µ:**
- –°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è
- Load average –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–ª—Å—è
- Playwright –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–≤
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å upgrade VPS –ø–ª–∞–Ω–∞
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: AttributeError: limiter.storage_uri

**–û—à–∏–±–∫–∞:**
```python
AttributeError: 'Limiter' object has no attribute 'storage_uri'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- `storage_uri` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç –≤ flask-limiter
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `_storage_uri`

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `limiter._storage_uri`
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**–ü–∞—Ç—á —Å–æ–∑–¥–∞–Ω:** `fix_storage_uri.patch`

**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:**
```bash
cd /path/to/cian-analyzer
git apply fix_storage_uri.patch
git add app_new.py
git commit -m "fix: Change limiter.storage_uri to limiter._storage_uri"
git push origin main
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: CIAN Captcha

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–ª—É—á—à–µ–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ User-Agent (Windows)
- HTTP headers –∫–∞–∫ —É Chrome –±—Ä–∞—É–∑–µ—Ä–∞
- –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ (1.5-3.0s)
- NetworkIdle wait strategy
- Timeout —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 60s

**–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–ø–∞—Ä—Å–∏—Ç—å: https://spb.cian.ru/sale/flat/319326048/
- –ï—Å–ª–∏ captcha –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è - –Ω—É–∂–Ω—ã –ø—Ä–æ–∫—Å–∏

---

## üìù Git –∫–æ–º–º–∏—Ç—ã

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```
3735671 docs: Add comprehensive deployment summary for v2.0
8b70dc4 feat: Mobile-first UI improvements with horizontal swipe
4f74f4e feat: Add manual input mode and show 'Next' button after parsing
144e18c feat: Add minimalist favicon with letter H
ad62ee3 fix: Add SSL support and nginx config
2a845ff fix: Change limiter.storage_uri to limiter._storage_uri (LOCAL)
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—à–∏—Ç—å –≤ GitHub:**
- `2a845ff` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ storage_uri

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

### Backend
- [x] –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- [x] Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Version: 2.0.0
- [x] PlaywrightParser –¥–æ—Å—Ç—É–ø–µ–Ω
- [x] Session storage —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Redis cache (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Frontend
- [x] https://housler.ru –¥–æ—Å—Ç—É–ø–µ–Ω
- [x] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] Mobile swipe —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ)
- [ ] Manual input –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] Next button –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
- [ ] Favicon –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### –ü–∞—Ä—Å–∏–Ω–≥
- [x] Playwright parser –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- [x] Stealth mode –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CIAN captcha –æ–±—Ö–æ–¥–∏—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
```
https://housler.ru
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- –°–≤–∞–π–ø –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í–∏–¥–Ω–æ 85% —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- –ü–ª–∞–≤–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Manual Input
```
https://housler.ru/calculator
‚Üí –ù–∞–∂–º–∏—Ç–µ "Manual Input"
‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É
```

### 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥
```
https://housler.ru/calculator
‚Üí –í—Å—Ç–∞–≤—å—Ç–µ: https://spb.cian.ru/sale/flat/319326048/
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ captcha
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ favicon
–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±—É–∫–≤–∞ H

---

## üìÑ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **deploy_updates.sh** - –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
2. **DEPLOY_NOW.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
3. **fix_storage_uri.patch** - –ü–∞—Ç—á –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏
4. **DEPLOYMENT_REPORT.md** - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

---

## üîß Troubleshooting

### –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
ssh -i ~/.ssh/id_housler root@91.229.8.221
journalctl -u housler -n 50 --no-pager
```

### –ï—Å–ª–∏ –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å load average
uptime

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
top -b -n 1 | head -20

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏—à–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã
pkill -f chromium
```

### –ï—Å–ª–∏ captcha –ø–æ—è–≤–ª—è–µ—Ç—Å—è
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: /var/www/housler/src/parsers/playwright_parser.py
# time.sleep(random.uniform(3.0, 5.0))

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- VPS: https://www.reg.ru/user/account/#/card/104046009
- GitHub: https://github.com/nikita-tita/cian-analyzer

**–õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
ssh -i ~/.ssh/id_housler root@91.229.8.221 "journalctl -u housler -f"
```

---

## ‚úÖ –ò—Ç–æ–≥

**–í–µ—Ä—Å–∏—è:** 2.0.0
**–°—Ç–∞—Ç—É—Å:** üü¢ **–†–∞–±–æ—Ç–∞–µ—Ç**
**–î–æ—Å—Ç—É–ø–µ–Ω:** https://housler.ru

**–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç!**

### –û—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å:
1. ‚ö†Ô∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–∞—Ç—á `fix_storage_uri.patch` –≤ GitHub
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å mobile swipe –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ CIAN (captcha bypass)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å manual input mode
5. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ load average

---

**–î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω:** 08.11.2025 12:44 MSK üéâ
