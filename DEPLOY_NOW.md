# üöÄ –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Housler

## ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**VPS —Å–µ—Ä–≤–µ—Ä (91.229.8.221) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** —Å 12:20 MSK (–ø—Ä–∏–º–µ—Ä–Ω–æ 20 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥).

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã Reg.ru
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Playwright)

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–µ—Ä CIAN (–æ–±—Ö–æ–¥ captcha)
2. ‚úÖ –£–ª—É—á—à–µ–Ω Playwright (stealth mode)
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (flask-limiter, redis)
4. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
5. ‚úÖ –í–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `main` –≤–µ—Ç–∫–µ GitHub

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- https://housler.ru
- http://91.229.8.221

**–ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è** - —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –¥–µ–ø–ª–æ—é.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Reg.ru

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://www.reg.ru/user/account/#/card/104046009
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
3. –ï—Å–ª–∏ "–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" - –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
ping -c 3 91.229.8.221

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH
ssh -i ~/.ssh/id_housler root@91.229.8.221 "uptime"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP
curl -I http://91.229.8.221
```

---

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç—Å—è)

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
cd /Users/fatbookpro/Desktop/cian
./deploy_updates.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
2. ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥ –∏–∑ GitHub (main)
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
5. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç Nginx
7. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

---

## üõ† –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
ssh -i ~/.ssh/id_housler root@91.229.8.221
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
cd /var/www/housler

# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
cp -r /var/www/housler /var/www/housler_backup_$(date +%Y%m%d_%H%M%S)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ GitHub
git fetch origin
git reset --hard origin/main
git pull origin main
```

### –®–∞–≥ 3: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
source venv/bin/activate
pip install -r requirements.txt
deactivate
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```bash
systemctl restart housler
systemctl status housler
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx

```bash
nginx -t
systemctl reload nginx
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
journalctl -u housler -n 50 --no-pager

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/error.log
```

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

```bash
curl -I https://housler.ru
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `HTTP/2 200`

### 2. Mobile Swipe

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: https://housler.ru

- –õ–∏—Å—Ç–∞–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ Services –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤–∏–¥–Ω–æ 85% —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- Scroll snap –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–≤–Ω–æ

### 3. Manual Input Mode

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: https://housler.ru/calculator
2. –ù–∞–∂–º–∏—Ç–µ "Manual Input"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –≤—Ä—É—á–Ω—É—é
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–µ—Å—Å–∏—è

### 4. URL Parsing

1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø–∞—Ä—Å–∏—Ç—å: https://spb.cian.ru/sale/flat/319326048/
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ captcha
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è

### 5. Next Button

–ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ"

### 6. Favicon

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ—è–≤–∏–ª–∞—Å—å –∏–∫–æ–Ω–∫–∞ (–±—É–∫–≤–∞ H)

---

## üìä –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```bash
# Manual input
POST /api/create-manual
Body: {
  "data": {
    "price": 10000000,
    "total_area": 65,
    "rooms": 2,
    ...
  }
}

# Health check
GET /health

# Metrics
GET /metrics
```

---

## üêõ Troubleshooting

### –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –°–º–æ—Ç—Ä–∏–º –æ—à–∏–±–∫–∏
journalctl -u housler -n 100 --no-pager

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç—ã
cd /var/www/housler
source venv/bin/activate
python -c "import app_new"
```

### CIAN captcha

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç captcha:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `playwright_parser.py`
2. –£–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –ø–∞—Ä—Å–µ—Ä–µ
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏

### Nginx 502 Bad Gateway

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
curl http://127.0.0.1:8001

# –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
systemctl restart housler
```

### SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
certbot renew --dry-run
certbot certificates
```

---

## üì± –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü–∞–Ω–µ–ª—å Reg.ru**: https://www.reg.ru/user/account/
2. **GitHub**: https://github.com/nikita-tita/cian-analyzer
3. **–õ–æ–≥–∏**: `journalctl -u housler -f`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- [ ] –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ö–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω –∏–∑ main
- [ ] –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- [ ] Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] https://housler.ru –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Mobile swipe —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Manual input –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] URL parsing —Ä–∞–±–æ—Ç–∞–µ—Ç (–±–µ–∑ captcha)
- [ ] Next button –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] Favicon –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---

**–ö–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç—Å—è - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**

```bash
cd /Users/fatbookpro/Desktop/cian
./deploy_updates.sh
```

üöÄ **–ò –≤—Å—ë –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ!**
