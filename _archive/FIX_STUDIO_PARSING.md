# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—É–¥–∏–π

**–î–∞—Ç–∞:** 06.11.2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ "—Å—Ç—É–¥–∏—è"

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

```
–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö: 1 validation error for ComparableProperty
rooms
  Input should be a valid integer, unable to parse string as an integer
  [type=int_parsing, input_value='—Å—Ç—É–¥–∏—è', input_type=str]
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–∞—Ä—Å–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `"—Å—Ç—É–¥–∏—è"`
- –ú–æ–¥–µ–ª—å –æ–∂–∏–¥–∞–µ—Ç `int`
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è `rooms` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å—Ç—Ä–æ–∫–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –≤–∞–ª–∏–¥–∞—Ç–æ—Ä `parse_rooms`

```python
@validator('rooms', pre=True)
def parse_rooms(cls, v):
    """
    –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–Ω–∞—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π "—Å—Ç—É–¥–∏—è"
    
    –°—Ç—É–¥–∏—è = 0 –∫–æ–º–Ω–∞—Ç (–æ—Ç–∫—Ä—ã—Ç–∞—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ø–∞–ª–µ–Ω)
    """
    if v is None:
        return None
    if isinstance(v, str):
        v_lower = v.lower().strip()
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—É–¥–∏—é
        if '—Å—Ç—É–¥' in v_lower:
            return 0
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ –∏–∑ —Å—Ç—Ä–æ–∫–∏
        import re
        match = re.search(r'\d+', v)
        if match:
            return int(match.group())
        return None
    return v
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ª—è `rooms`

```python
# –ë–´–õ–û:
rooms: Optional[int] = Field(None, ge=1, le=10)  # –º–∏–Ω–∏–º—É–º 1

# –°–¢–ê–õ–û:
rooms: Optional[int] = Field(None, ge=0, le=10)  # 0 = —Å—Ç—É–¥–∏—è
```

---

## üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:

| –í—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü–æ—è—Å–Ω–µ–Ω–∏–µ |
|-----------------|-----------|-----------|
| `"—Å—Ç—É–¥–∏—è"` | `0` | –°—Ç—É–¥–∏—è = 0 –∫–æ–º–Ω–∞—Ç |
| `"–°—Ç—É–¥–∏—è"` | `0` | –†–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω |
| `"1"` | `1` | –û–¥–Ω–æ–∫–æ–º–Ω–∞—Ç–Ω–∞—è |
| `"2-–∫–æ–º–Ω–∞—Ç–Ω–∞—è"` | `2` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç —á–∏—Å–ª–æ |
| `"3 –∫–æ–º–Ω–∞—Ç—ã"` | `3` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç —á–∏—Å–ª–æ |
| `None` | `None` | –ù–µ —É–∫–∞–∑–∞–Ω–æ |
| `1` | `1` | –£–∂–µ —á–∏—Å–ª–æ |

---

## üè† –õ–æ–≥–∏–∫–∞ "—Å—Ç—É–¥–∏—è = 0 –∫–æ–º–Ω–∞—Ç"

**–ü–æ—á–µ–º—É —Å—Ç—É–¥–∏—è = 0?**

–í –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ **—Å—Ç—É–¥–∏—è** ‚Äî —ç—Ç–æ –∫–≤–∞—Ä—Ç–∏—Ä–∞ **–ë–ï–ó –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ø–∞–ª–µ–Ω**:
- –û—Ç–∫—Ä—ã—Ç–∞—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞
- –ñ–∏–ª–∞—è –∑–æ–Ω–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ —Å –∫—É—Ö–Ω–µ–π
- –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç

**–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ `0` ‚Äî –ø—Ä–∏–Ω—è—Ç–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–∏—Å—Ç–µ–º (–¶–ò–ê–ù, Avito)
- ‚ùå `1` ‚Äî –ø—É—Ç–∞–Ω–∏—Ü–∞ —Å –æ–¥–Ω–æ–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–æ–π
- ‚ùå `null` ‚Äî —Ç–µ—Ä—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–û—Ç–ª–∏—á–∏—è:**
```
–°—Ç—É–¥–∏—è (0 –∫–æ–º–Ω–∞—Ç):
  ‚îú‚îÄ –û–¥–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞—è –∑–æ–Ω–∞
  ‚îú‚îÄ –ö—É—Ö–Ω—è –≤ –∫–æ–º–Ω–∞—Ç–µ
  ‚îî‚îÄ –ü–ª–æ—â–∞–¥—å: –æ–±—ã—á–Ω–æ 20-40 –º¬≤

–û–¥–Ω–æ–∫–æ–º–Ω–∞—Ç–Ω–∞—è (1 –∫–æ–º–Ω–∞—Ç–∞):
  ‚îú‚îÄ –û—Ç–¥–µ–ª—å–Ω–∞—è —Å–ø–∞–ª—å–Ω—è
  ‚îú‚îÄ –û—Ç–¥–µ–ª—å–Ω–∞—è –∫—É—Ö–Ω—è
  ‚îî‚îÄ –ü–ª–æ—â–∞–¥—å: –æ–±—ã—á–Ω–æ 30-50 –º¬≤
```

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç:

```python
from src.models.property import ComparableProperty

# –°—Ç—É–¥–∏—è
studio = ComparableProperty(
    url="http://test.com",
    rooms="—Å—Ç—É–¥–∏—è",  # –°—Ç—Ä–æ–∫–∞!
    price=5_000_000,
    total_area=25
)
print(f"–°—Ç—É–¥–∏—è: {studio.rooms} –∫–æ–º–Ω–∞—Ç")  # ‚Üí 0

# –û–¥–Ω–æ–∫–æ–º–Ω–∞—Ç–Ω–∞—è
one_room = ComparableProperty(
    url="http://test.com",
    rooms="1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è",
    price=7_000_000,
    total_area=35
)
print(f"1-–∫–æ–º–Ω–∞—Ç–Ω–∞—è: {one_room.rooms} –∫–æ–º–Ω–∞—Ç")  # ‚Üí 1
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### [src/models/property.py](src/models/property.py)

**–°—Ç—Ä–æ–∫–∞ 18:** –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
```python
rooms: Optional[int] = Field(None, ge=0, le=10)  # 0 = —Å—Ç—É–¥–∏—è
```

**–°—Ç—Ä–æ–∫–∏ 34-54:** –î–æ–±–∞–≤–ª–µ–Ω –≤–∞–ª–∏–¥–∞—Ç–æ—Ä `parse_rooms`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—É–¥–∏–∏:
- ‚úÖ –°—Ç—Ä–æ–∫–∞ `"—Å—Ç—É–¥–∏—è"` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `0`
- ‚úÖ –ß–∏—Å–ª–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ —Å—Ç—Ä–æ–∫ (`"2-–∫–æ–º–Ω–∞—Ç–Ω–∞—è"` ‚Üí `2`)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

---

**–ê–≤—Ç–æ—Ä:** Claude Code  
**–î–∞—Ç–∞:** 06.11.2025
