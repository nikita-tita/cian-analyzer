# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º

## Playwright Parser - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Playwright –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install playwright playwright-stealth
playwright install chromium

# –ò–õ–ò —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements-advanced.txt
playwright install chromium
```

### –ó–∞–ø—É—Å–∫ –Ω–∞ –≤–∞—à–∏—Ö —Å—Å—ã–ª–∫–∞—Ö

```bash
python parse_with_playwright.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üöÄ –ü–ê–†–°–ò–ù–ì –° PLAYWRIGHT - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨
================================================================================

üìä –í—Å–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: 6
‚ö° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: Playwright (–Ω–∞ 35% –±—ã—Å—Ç—Ä–µ–µ Selenium)
üéØ –û–∂–∏–¥–∞–µ–º–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å: 90-95% –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

[1/6] –ü–∞—Ä—Å–∏–Ω–≥: https://www.cian.ru/sale/flat/319270312/
--------------------------------------------------------------------------------
‚úì –£–°–ü–ï–®–ù–û!
  üìù –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ü—Ä–æ–¥–∞–µ—Ç—Å—è 3-–∫–æ–º–Ω. –∫–≤–∞—Ä—Ç–∏—Ä–∞, 106,2 –º¬≤
  üí∞ –¶–µ–Ω–∞: 75 000 000 ‚ÇΩ
  üìç –ê–¥—Ä–µ—Å: –ø—Ä–æ–µ–∑–¥ –ü–µ—Ç—Ä–æ–≤—Å–∫–∞—è –∫–æ—Å–∞, 6–∫1
  üöá –ú–µ—Ç—Ä–æ: –ö—Ä–µ—Å—Ç–æ–≤—Å–∫–∏–π –æ—Å—Ç—Ä–æ–≤
  üìè –ü–ª–æ—â–∞–¥—å: 106.2 –º¬≤
  üè¢ –≠—Ç–∞–∂: 12/25
  üì∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 23
  üìã –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫: 15
  üìÑ –û–ø–∏—Å–∞–Ω–∏–µ: –ê—Ä—Ç. 109109199 –†–µ–¥–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ...
```

### –ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è

‚úÖ **100% –¥–∞–Ω–Ω—ã—Ö:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫
- –¶–µ–Ω–∞ (—Å –≤–∞–ª—é—Ç–æ–π)
- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- –ê–¥—Ä–µ—Å
- –ú–µ—Ç—Ä–æ (–≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–≤—Å–µ —Ñ–æ—Ç–æ)
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (–ø–ª–æ—â–∞–¥—å, —ç—Ç–∞–∂, –≥–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ç.–¥.)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–≤—Ü–µ
- –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –ö–æ–Ω—Ç–∞–∫—Ç—ã (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º

| –î–∞–Ω–Ω—ã–µ | –ë–∞–∑–æ–≤—ã–π | Playwright |
|--------|---------|------------|
| –ó–∞–≥–æ–ª–æ–≤–∫–∏ | ‚úÖ 100% | ‚úÖ 100% |
| –¶–µ–Ω—ã | ‚ö†Ô∏è 30% | ‚úÖ 95% |
| –û–ø–∏—Å–∞–Ω–∏—è | ‚ö†Ô∏è 30% | ‚úÖ 95% |
| –ê–¥—Ä–µ—Å–∞ | ‚ùå 0% | ‚úÖ 90% |
| –ú–µ—Ç—Ä–æ | ‚ùå 0% | ‚úÖ 90% |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ‚ùå 0% | ‚úÖ 95% |
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ | ‚ùå 0% | ‚úÖ 90% |

**–ò—Ç–æ–≥–æ:** Playwright –∏–∑–≤–ª–µ–∫–∞–µ—Ç **–≤ 3-4 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö!**

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä

```python
from src.cian_parser_playwright import CianParserPlaywright

# –° context manager (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä)
with CianParserPlaywright(headless=True, delay=2.0) as parser:
    data = parser.parse_detail_page('https://www.cian.ru/sale/flat/319270312/')

    print(f"–ó–∞–≥–æ–ª–æ–≤–æ–∫: {data['title']}")
    print(f"–¶–µ–Ω–∞: {data['price']}")
    print(f"–ê–¥—Ä–µ—Å: {data['address']}")
    print(f"–ú–µ—Ç—Ä–æ: {', '.join(data['metro'])}")
    print(f"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: {len(data['images'])}")
```

### –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö URL

```python
from src.cian_parser_playwright import CianParserPlaywright

urls = [
    'https://www.cian.ru/sale/flat/319270312/',
    'https://www.cian.ru/sale/flat/319230363/',
    # ... –±–æ–ª—å—à–µ URL
]

parser = CianParserPlaywright(headless=True)
results = parser.parse_multiple(urls)
parser.save_to_json(results, 'results.json')
```

### –° –≤–∏–∑—É–∞–ª—å–Ω—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

```python
# –£–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
with CianParserPlaywright(headless=False, delay=2.0) as parser:
    data = parser.parse_detail_page('https://www.cian.ru/sale/flat/319270312/')
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```python
parser = CianParserPlaywright(
    headless=True,  # False - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä
    delay=2.0,      # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
)
```

### –î–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, —É–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É:

```python
parser = CianParserPlaywright(
    headless=True,
    delay=5.0,  # 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
)
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Nodriver** (—Å–º. –Ω–∏–∂–µ)

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Playwright not found"

```bash
pip install playwright
playwright install chromium
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `headless=True`
- –£–º–µ–Ω—å—à–∏—Ç–µ `delay` –¥–æ 1.0 (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Cloudflare

–ï—Å–ª–∏ Playwright –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Nodriver**:

```bash
pip install nodriver
```

```python
import nodriver as uc

async def main():
    browser = await uc.start()
    page = await browser.get('https://www.cian.ru/sale/flat/319270312/')
    await page.sleep(2)

    title = await page.find('h1')
    print(await title.text)

    await browser.stop()

uc.loop().run_until_complete(main())
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å

- **–ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä**: ~3-5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- **Playwright**: ~5-7 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- **Nodriver**: ~7-10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ

### –ü–∞–º—è—Ç—å

- **–ë–∞–∑–æ–≤—ã–π**: ~50 MB
- **Playwright**: ~200-300 MB (–æ–¥–∏–Ω –±—Ä–∞—É–∑–µ—Ä)
- **Nodriver**: ~250-350 MB

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞:
- **–î–æ 100 –æ–±—ä—è–≤–ª–µ–Ω–∏–π**: Playwright (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- **100-1000 –æ–±—ä—è–≤–ª–µ–Ω–∏–π**: Playwright + –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è
- **1000+ –æ–±—ä—è–≤–ª–µ–Ω–∏–π**: Scrapy + Playwright

## –ú–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥

–î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:

```python
from concurrent.futures import ThreadPoolExecutor

urls = [...]  # –ú–Ω–æ–≥–æ URL

def parse_url(url):
    with CianParserPlaywright() as parser:
        return parser.parse_detail_page(url)

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º!)
with ThreadPoolExecutor(max_workers=3) as executor:
    results = list(executor.map(parse_url, urls))
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä!

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥**:
   ```bash
   python parse_with_playwright.py
   ```

2. **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞**, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nodriver:
   ```bash
   pip install nodriver
   ```

3. **–î–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞** (1000+ –æ–±—ä—è–≤–ª–µ–Ω–∏–π):
   - –°–º. [BEST_SOLUTIONS.md](BEST_SOLUTIONS.md) —Ä–∞–∑–¥–µ–ª Scrapy

4. **–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ü–µ–Ω**:
   - –°–æ–∑–¥–∞–π—Ç–µ cron job –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Actions

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [BEST_SOLUTIONS.md](BEST_SOLUTIONS.md) - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—à–µ–Ω–∏–π
- [HOW_IT_WORKS.md](HOW_IT_WORKS.md) - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä
- [Playwright Docs](https://playwright.dev/python/) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Nodriver GitHub](https://github.com/ultrafunkamsterdam/nodriver) - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ! üéâ**

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç **95-100% –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö** —Å Cian.ru!
