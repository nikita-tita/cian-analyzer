# ========================================
# Housler v2.0 Environment Configuration
# ========================================

# ----------------------------------------
# Redis Configuration (Caching + Rate Limiting)
# ----------------------------------------
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6380
REDIS_DB=0
REDIS_PASSWORD=
REDIS_NAMESPACE=housler

# ----------------------------------------
# Flask Configuration
# ----------------------------------------
FLASK_ENV=production
FLASK_DEBUG=false
SECRET_KEY=  # Generate with: openssl rand -hex 32

# ----------------------------------------
# Gunicorn Configuration
# ----------------------------------------
WORKERS=4
WORKER_CLASS=sync
TIMEOUT=300
BIND=0.0.0.0:5000

# ----------------------------------------
# Logging
# ----------------------------------------
LOG_LEVEL=INFO

# ----------------------------------------
# Parser Configuration
# ----------------------------------------
# Default region: spb (Санкт-Петербург) or msk (Москва)
DEFAULT_REGION=spb
PARSER_HEADLESS=true
PARSER_DELAY=1.0
MAX_CONCURRENT_PARSING=5

# Browser Pool: Limits concurrent Playwright browser instances
# Production recommended: 3-5 browsers (each uses ~200-300MB RAM)
# CRITICAL for preventing DoS and memory exhaustion
MAX_BROWSERS=3

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
# Format: "N per period" where period = second/minute/hour/day
RATELIMIT_DEFAULT=200 per day, 50 per hour
RATELIMIT_PARSE=10 per minute
RATELIMIT_SEARCH=15 per minute
RATELIMIT_ANALYZE=20 per minute

# ----------------------------------------
# Monitoring (Optional)
# ----------------------------------------
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false

# ----------------------------------------
# Security (Production)
# ----------------------------------------
# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,housler.ru

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://housler.ru

# Admin API key for cache management endpoints
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# ----------------------------------------
# Telegram Configuration (Blog Publishing)
# ----------------------------------------
# Telegram bot token for publishing blog posts
TELEGRAM_BOT_TOKEN=

# Telegram channel ID for blog publishing (e.g. @housler_ae)
TELEGRAM_CHANNEL_ID=@housler_ae

# Telegram chat ID for alerts (optional)
TELEGRAM_CHAT_ID=

# Telegram bot username (optional)
TELEGRAM_BOT_USERNAME=housler_bot

# Telegram user IDs allowed to publish blog posts via #блог (comma-separated)
# Get your ID: send /start to @userinfobot
BLOG_ADMIN_USER_IDS=

# ----------------------------------------
# Telegram Publishing Settings
# ----------------------------------------
# Content ratio for Telegram posts (0.65 = 65% of article content)
TELEGRAM_CONTENT_RATIO=0.65

# Maximum symbols for Telegram (Telegram limit is 4096)
TELEGRAM_MAX_SYMBOLS=4000

# ----------------------------------------
# Blog Configuration
# ----------------------------------------
# Site URL for generating article links
SITE_URL=https://housler.ru

# Blog database path (production: /var/www/housler_data/blog.db)
BLOG_DB_PATH=/var/www/housler_data/blog.db

# ----------------------------------------
# Yandex GPT (Article Rewriting)
# ----------------------------------------
# Yandex Cloud API key for GPT article rewriting
YANDEX_API_KEY=

# Yandex Cloud folder ID
YANDEX_FOLDER_ID=

# ----------------------------------------
# Yandex ART (Cover Image Generation)
# ----------------------------------------
# Enable/disable cover generation (true/false)
YANDEX_ART_ENABLED=true

# Timeout for image generation (seconds)
YANDEX_ART_TIMEOUT=60

# ----------------------------------------
# Proxy Configuration (Decodo/Smartproxy)
# ----------------------------------------
# Enable proxy for parsing (true/false)
PROXY_ENABLED=false

# Proxy server address (e.g., gate.decodo.com)
PROXY_HOST=gate.decodo.com

# Proxy port (e.g., 10001)
PROXY_PORT=10001

# Proxy authentication
PROXY_USERNAME=
PROXY_PASSWORD=

# Proxy type: http, https, socks5
PROXY_TYPE=http

# Proxy location (country code, e.g., RU for Russia)
PROXY_LOCATION=RU
